(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-49cdeeb4"],{2754:function(e,t,s){},cea7:function(e,t,s){"use strict";s("2754")},f1bf:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"genarate"},[s("h1",[e._v("生成密钥")]),s("div",{staticClass:"key-option"},[s("div",{staticClass:"generate-key"},[s("p",[e._v("生成一个新的密钥")]),s("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.generateKey}},[e._v("生成密钥")])],1),s("div",{staticClass:"upload-key"},[s("p",[e._v("已有密钥,我要上传")]),s("div",{staticClass:"upload-box"},[s("el-upload",{staticClass:"upload-demo",attrs:{action:"http://127.0.0.1:8888/api/key/upload/private.pem",multiple:"",limit:99,"show-file-list":!1,"on-success":e.handleSuccess}},[s("el-button",{attrs:{icon:"el-icon-upload",size:"small",type:"primary"}},[e._v("上传私钥")])],1),s("el-upload",{staticClass:"upload-demo",attrs:{action:"http://127.0.0.1:8888/api/key/upload/public.pem",multiple:"",limit:99,"show-file-list":!1,"on-success":e.handleSuccess}},[s("el-button",{attrs:{icon:"el-icon-upload",size:"small",type:"primary"}},[e._v("上传公钥")])],1)],1)])]),s("hr"),s("div",{staticClass:"des-input"},[s("p",[e._v("输入des密码")]),s("div",{staticClass:"form"},[s("el-form",{ref:"desForm",staticClass:"desForm",attrs:{model:e.desForm,rules:e.rules}},[s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{attrs:{size:"small",maxlength:8,"show-password":""},model:{value:e.desForm.password,callback:function(t){e.$set(e.desForm,"password",t)},expression:"desForm.password"}})],1)],1),s("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.saveDes}},[e._v("保存")])],1)]),e.showKey?s("div",{staticClass:"key-container"},[s("div",{staticClass:"key-item"},[s("div",{staticClass:"key-title"},[s("p",[e._v("公钥")]),s("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.downloadKey("public")}}},[e._v("下载公钥")])],1),s("div",{staticClass:"text-box"},[s("el-input",{attrs:{type:"textarea",rows:10,placeholder:"公钥"},model:{value:e.key.publicPem,callback:function(t){e.$set(e.key,"publicPem",t)},expression:"key.publicPem"}})],1),s("div",{staticClass:"modify"},[s("el-button",{attrs:{type:"primary",icon:"el-icon-edit-outline",round:""},on:{click:function(t){return e.modify("public.pem")}}},[e._v("修改公钥")])],1)]),s("div",{staticClass:"key-item"},[s("div",{staticClass:"key-title"},[s("p",[e._v("私钥")]),s("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.downloadKey("private")}}},[e._v("下载私钥")])],1),s("div",{staticClass:"text-box"},[s("el-input",{attrs:{type:"textarea",rows:10,placeholder:"私钥"},model:{value:e.key.privatePem,callback:function(t){e.$set(e.key,"privatePem",t)},expression:"key.privatePem"}})],1),s("div",{staticClass:"modify"},[s("el-button",{attrs:{type:"primary",icon:"el-icon-edit-outline",round:""},on:{click:function(t){return e.modify("private.pem")}}},[e._v("修改私钥")])],1)])]):s("p",{staticClass:"no-key"},[e._v("暂未生成密钥")])])},i=[],o={data(){return{key:{publicPem:"",privatePem:""},showKey:!1,desForm:{password:""},rules:{password:[{required:!0,message:"请输入你的des密码",trigger:"blur"},{min:8,max:8,message:"长度在必须为8个字符",trigger:"blur"}]}}},created(){this.getKey(),this.desForm.password=localStorage.getItem("des")},methods:{saveDes(){this.$refs["desForm"].validate(e=>{if(!e)return console.log("error submit!!"),!1;localStorage.setItem("des",this.desForm.password),this.$message({message:"des密码保存成功",type:"success"})})},getKey(){this.http.get("/getkey").then(e=>{console.log(e),0===e.data.code&&(this.key=e.data.data,this.showKey=!0)})},generateKey(){this.http.get("/generator").then(e=>{console.log(e),0===e.data.code&&(this.showKey=!0,this.key=e.data.data,this.$message({message:e.data.msg,type:"success"}))})},downloadKey(e){window.open(`http://127.0.0.1:8888/api/download/${e}.pem`,"_self")},handleSuccess(e){console.log(e),0==e.code?(this.$message({message:e.msg,type:"success"}),this.getKey()):this.$message.error(e.msg)},modify(e){let t;t="private.pem"==e?this.key.privatePem:this.key.publicPem,this.http.post("/key/modify",{fileName:e,key:t}).then(e=>{0==e.data.code?(this.$message({message:e.data.msg,type:"success"}),this.getKey()):this.$message.error(e.data.msg)})}}},l=o,r=(s("cea7"),s("2877")),c=Object(r["a"])(l,a,i,!1,null,"63bd6d8a",null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-49cdeeb4.84db09a5.js.map